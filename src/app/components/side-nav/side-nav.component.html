<div
  class="main bg-white"
  *ngIf="user.role === 'instructor' || user.role === 'student'"
>
  <!-- Profile Picture -->

  <div class="card side-header">
    <div class="pt-5 pb-2">
      <img [src]="user.image" alt="" class="profile-pic" />
      <h5 class="text-left text-light pl-3 pt-4">
        {{ user.name.first }} {{ user.name.last }}
      </h5>
      <h6 class="text-left pl-3 text-light text-capitalize">
        {{ user.role == "instructor" ? user.role : user.student_number }}
      </h6>
      <a
        class="text-light float-right pr-2 profile-link"
        [routerLink]="['/profile']"
        routerLinkActive="router-link-active"
        >View Profile</a
      >
    </div>
  </div>
  <div class="card mt-2" *ngIf="selectedClass.name.trim() !== ''">
    <button
      type="button"
      class="list-group-item list-group-item-action text-primary"
      (click)="resetClass()"
      [routerLink]="['/dashboard']"
      routerLinkActive="router-link-active"
    >
      <i class="icon ion-md-people mr-3 "></i><span class="">Classes</span>
    </button>
  </div>

  <!-- Dashboard Button -->

  <div class="card mt-2" *ngIf="selectedClass.name.trim() !== ''">
    <button
      type="button"
      class="list-group-item list-group-item-action bg-primary text-light"
      [routerLink]="['/view-class']"
      routerLinkActive="router-link-active"
    >
      <div class="row">
        <div class="col-md-2">
          <i
            [class]="'icon ion-md-people mr-3 text-' + selectedClass.color"
          ></i>
        </div>
        <div class="col-md-10">
          <span [class]="'text-' + selectedClass.color">{{
            selectedClass.name
          }}</span>
        </div>
      </div>
    </button>
  </div>

  <!-- SELECTED CLASS -->

  <div
    class="card mt-2"
    *ngIf="selectedClass.name.trim() !== '' && user.role == 'instructor'"
  >
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/dashboard']"
          routerLinkActive="router-link-active"
        >
          <i [class]="'icon ion-md-school mr-3 text-' + selectedClass.color"></i
          ><span class="">Dashboard</span>
        </button>
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/students']"
          routerLinkActive="router-link-active"
        >
          <i
            [class]="'icon ion-ios-contacts mr-3 text-' + selectedClass.color"
          ></i
          ><span class="">Students</span>
        </button>

        <div class="list-group">
          <a
            href="#activities"
            data-toggle="collapse"
            aria-expanded="false"
            class="list-group-item list-group-item-action dropdown-toggle bg-primary text-light"
            ><i
              [class]="'icon ion-ios-paper mr-3 text-' + selectedClass.color"
            ></i>
            Activities
          </a>
          <ul class="collapse list-unstyled m-0" id="activities">
            <li>
              <button
                type="button"
                class="list-group-item list-group-item-action"
                [routerLink]="['/activities/quiz']"
                routerLinkActive="router-link-active"
              >
                <i
                  [class]="
                    'icon ion-ios-create mx-3 text-' + selectedClass.color
                  "
                ></i
                ><span class="">Quiz</span>
              </button>
            </li>
            <li>
              <button
                type="button"
                class="list-group-item list-group-item-action"
                [routerLink]="['/activities/exams']"
                routerLinkActive="router-link-active"
              >
                <i
                  [class]="
                    'icon ion-ios-journal mx-3 text-' + selectedClass.color
                  "
                ></i
                ><span class="">Exams</span>
              </button>
            </li>
          </ul>
        </div>

        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/library']"
          routerLinkActive="router-link-active"
        >
          <i
            [class]="'icon ion-ios-peoples mr-3 text-' + selectedClass.color"
          ></i
          ><span class="">Collections</span>
        </button>
        <button
          type="button"
          class="list-group-item list-group-item-action"
        >
        <!--
          [routerLink]="['/grades']"
          routerLinkActive="router-link-active"
         -->
          <i [class]="'icon fa fa-calculator mr-3 text-' + selectedClass.color"></i
          ><span class="">Grades</span>
        </button>
      </div>
    </div>
  </div>

  <div
    class="card mt-2"
    *ngIf="selectedClass.name.trim() !== '' && user.role == 'student'"
  >
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/dashboard']"
          routerLinkActive="router-link-active"
        >
          <i [class]="'icon ion-md-school mr-3 text-' + selectedClass.color"></i
          ><span class="">Dashboard</span>
        </button>
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/view-class']"
          routerLinkActive="router-link-active"
        >
        <!--
          [routerLink]="['/view-student-grade']"
         -->
          <i [class]="'icon fa fa-archive mr-3 text-' + selectedClass.color"></i
          ><span class="">Overview</span>
        </button>
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/student-activities']"
          routerLinkActive="router-link-active"
        >
          <i
            [class]="'icon ion-ios-paper mr-3 text-' + selectedClass.color"
          ></i>
          <span class="">Activities</span>
        </button>

        <button
          type="button"
          class="list-group-item list-group-item-action"
        >
        <!--
          [routerLink]="['/view-student-grade']"
          routerLinkActive="router-link-active"
         -->
          <i [class]="'icon fa fa-calculator mr-3 text-' + selectedClass.color"></i
          ><span class="">Grades</span>
        </button>

      </div>
    </div>
  </div>

  <!-- Class List -->

  <div class="card mt-2" *ngIf="selectedClass.name.trim() === ''">
    <div class="card-body p-0">
      <div class="list-group">
        <a
          href="#classes"
          data-toggle="collapse"
          aria-expanded="false"
          class="list-group-item list-group-item-action text-primary dropdown-toggle bg-light"
          ><i class="icon ion-md-people mr-3"></i
          >{{ user.role == "instructor" ? "Class List" : "My Classes" }}
        </a>
        <ul class="collapse show list-unstyled" id="classes">
          <li *ngIf="classList?.length == 0">
            <div class="row">
              <div class="col-md-2"></div>
              <div class="col-md-10 mt-2">
                <span class="text-secondary">No Class Found</span>
              </div>
            </div>
          </li>
          <li *ngFor="let class of classList">
            <button
              type="button"
              class="list-group-item list-group-item-action bg-light"
              routerLinkActive="router-link-active"
              (click)="setSelectedClass(class)"
            >
              <div class="row">
                <div class="col-md-2">
                  <i
                    [class]="'icon ion-md-people mr-3 text-' + class.color"
                  ></i>
                </div>
                <div class="col-md-10">
                  <span [class]="'text-' + class.color">{{ class.name }}</span>
                </div>
              </div>
            </button>
          </li>
        </ul>
        <a
          href="#manage"
          data-toggle="collapse"
          aria-expanded="true"
          class="list-group-item list-group-item-action text-light bg-primary dropdown-toggle"
          ><i class="icon ion-md-people mr-3"></i>
          Class Management
        </a>
        <ul class="collapse list-unstyled bg-side show" id="manage">
          <li>
            <button
              type="button"
              class="list-group-item list-group-item-action text-primary"
              (click)="openSmModal(addClassModal)"
            >
              <i class="icon ion-md-add-circle  mr-3"></i
              ><span class="">New Class</span>
            </button>
          </li>
          <li>
            <button
              type="button"
              class="list-group-item list-group-item-action text-primary"
              [routerLink]="['/manage-class']"
              routerLinkActive="router-link-active"
              *ngIf="user.role == 'instructor'"
            >
              <i class="icon ion-md-stats  mr-3"></i
              ><span class="">Overview</span>
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Profile | Messages | About -->

  <div class="card mt-2" *ngIf="selectedClass.name.trim() === ''">
    <div class="card-body p-0">
      <div class="list-group">
        <!-- <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/messages']"
          routerLinkActive="router-link-active"
          *ngIf="user.role === 'instructor'"
        >
          <i class="icon ion-md-chatboxes  mr-3"></i
          ><span class="">Messages</span>
        </button> -->

        <!-- <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/student-parents']"
          routerLinkActive="router-link-active"
          *ngIf="user.role === 'student'"
        >
          <i class="icon ion-ios-contacts  mr-3"></i
          ><span class="">Parents</span>
        </button> -->

        <!-- <button
          type="button"
          class="list-group-item list-group-item-action"
          (click)="openModal(aboutModal)"
        >
          <i class="icon ion-md-information-circle-outline  mr-3"></i
          ><span class="">About</span>
        </button> -->
      </div>
    </div>
  </div>

  <!-- Logout -->

  <div class="card mt-2">
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          (click)="logOut()"
        >
          <i class="icon ion-md-log-out  mr-3"></i><span class="">Logout</span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Admin -->
<div class="main" *ngIf="user.role === 'admin'">
  <div class="card side-header-admin">
    <div class="pt-5 pb-2">
      <img [src]="user.image" alt="" class="profile-pic" />
      <h5 class="text-left text-light pl-3 pt-4">
        {{ user.name.first }} {{ user.name.last }}
      </h5>
      <h6 class="text-left pl-3 text-light text-capitalize">
        Moderator
      </h6>
      <a
        class="text-light float-right pr-2 profile-link"
        [routerLink]="['/profile']"
        routerLinkActive="router-link-active"
        >View Profile</a
      >
    </div>
  </div>

  <!-- Dashboard -->
  <!-- <div class="card mt-2">
    <button
      type="button"
      class="list-group-item list-group-item-action"
      [routerLink]="['/dashboard']"
      routerLinkActive="router-link-active"
    >
      <i class="icon ion-md-school mr-3 "></i
      ><span class="">Dashboard</span>
    </button>
  </div> -->

  <div class="card mt-2" *ngIf="selectedClass.name.trim() === ''">
    <div class="card-body p-0">
      <div class="list-group">
        <div class="list-group">
          <a
            href="#classes"
            data-toggle="collapse"
            aria-expanded="false"
            class="list-group-item list-group-item-action text-primary dropdown-toggle"
            ><i class="icon ion-md-people mr-3"></i>
            Records
          </a>
          <ul class="collapse list-unstyled bg-side" id="classes">
            <li>
              <button
                type="button"
                class="list-group-item list-group-item-action"
                [routerLink]="['/manage-instructors']"
                routerLinkActive="router-link-active"
              >
                <i class="icon ion-md-contact  mr-3"></i
                ><span class="">Manage Instructors</span>
              </button>
            </li>
          </ul>
          <!-- <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/manage-students']"
          routerLinkActive="router-link-active"
        >
          <i class="icon ion-md-contacts  mr-3"></i
          ><span class="">Student</span>
        </button> -->
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- Profile | Messages | About -->
  <!-- Logout -->

  <div class="card mt-2">
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          (click)="logOut()"
        >
          <i class="icon ion-md-log-out  mr-3"></i><span class="">Logout</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Parent -->
<div class="main" *ngIf="user.role === 'parent'">
  <div class="card ">
    <div class="card-header bg-primary pt-4"></div>
    <div class="card-body pt-3 pb-2">
      <img [src]="user.image" alt="" class="profile-pic" />
      <h5 class="text-center ">{{ user.name.first }} {{ user.name.last }}</h5>
      <h6 class="text-center text-secondary text-capitalize mt-1">
        {{ user.role }}
      </h6>
    </div>
  </div>

  <div class="card mt-2" *ngIf="selectedClass.name.trim() === ''">
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          [routerLink]="['/view-my-student']"
          routerLinkActive="router-link-active"
          *ngIf="!loading"
        >
          <i class="icon ion-ios-contacts  mr-3"></i
          ><span class=""
            >{{ student?.name.first }} {{ student?.name.last }}</span
          >
        </button>
      </div>
    </div>
  </div>

  <!-- Logout -->

  <div class="card mt-2">
    <div class="card-body p-0">
      <div class="list-group">
        <button
          type="button"
          class="list-group-item list-group-item-action"
          (click)="logOut()"
        >
          <i class="icon ion-md-log-out  mr-3"></i><span class="">Logout</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modals -->

<ng-template #addClassModal let-c="close" let-d="dismiss">
  <div class="modal-header bg-primary">
    <h4 class="modal-title text-light">
      {{ user.role == "instructor" ? "New Class" : "Join Class" }}
    </h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true" class="text-light">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div *ngIf="user.role == 'instructor'">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text bg-primary text-light" id="">Class name:</span>
        </div>
        <input type="text" class="form-control" [(ngModel)]="newClassname" />
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text bg-primary text-light" id="">Description:</span>
        </div>
        <input type="text" class="form-control" [(ngModel)]="newDescription" />
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text bg-primary text-light" for="inputColors">Class Color:</span>
        </div>
        <select
          [class]="
            newColor != 'yellow'
              ? 'custom-select  bg-' + newColor
              : 'custom-select text-dark bg-' + newColor
          "
          id="inputColors"
          [(ngModel)]="newColor"
        >
          <option class="text-dark" selected>Choose...</option>
          <option class="text-dark" value="red">Red</option>
          <option class="text-dark" value="orange">Orange</option>
          <option class="text-dark" value="yellow">Yellow</option>
          <option class="text-dark" value="lime">Lime</option>
          <option class="text-dark" value="blue">Blue</option>
          <option class="text-dark" value="purple">Purple</option>
          <option class="text-dark" value="fuchsia">Fuchsia</option>
          <option class="text-dark" value="aqua">Aqua</option>
          <option class="text-dark" value="green">Green</option>
          <option class="text-dark" value="teal">Teal</option>
        </select>
      </div>
    </div>
    <div *ngIf="user.role == 'student'">
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text text-light bg-primary" id="">Class #</span>
        </div>
        <input type="text" class="form-control" [(ngModel)]="newClassCode" />
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-success"
      (click)="user.role == 'instructor' ? addNewClass() : joinClass()"
    >
      Confirm
    </button>
  </div>
</ng-template>

<!-- Spinner -->

<ngx-spinner
  bdOpacity="0.5"
  bdColor="rgba(51,51,51,0.6)"
  size="default"
  color="#fff"
  type="ball-pulse-sync"
  [fullScreen]="true"
>
</ngx-spinner>
