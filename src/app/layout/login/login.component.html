<div class="main h-100 w-100">
  <img src="assets/images/trimex.png" class="logo" />
  <h1 class="text-center">
    <span class="text-danger">LMS </span> <span class="text-light">KONEK</span>
  </h1>

  <hr />
  <div class="text-center mt-3 mb-5">
    <p class="text-danger">Join now</p>
    <div class="row">
      <div class="col-sm-2"></div>
      <div class="col-sm-4">
        <button
          class="hover-primary btn bg-transparent
        w-100 mb-2 rounded text-white border-primary"
          (click)="openModal(loginModal)"
        >
          Login
        </button>
      </div>
      <div class="col-sm-4">
        <button
          class="hover-primary btn bg-transparent
                w-100 mb-2 rounded text-white border-primary"
          (click)="openModal(registerModal)"
        >
          Register
        </button>
      </div>
      <div class="col-sm-4"></div>
      <div class="col-sm-2"></div>
    </div>
  </div>
</div>

<ng-template #loginModal let-modal>
  <div class="row" id="login-row">
    <div class="col-lg-6 rounded-left bg-transparent"></div>
    <div class="col-lg-6 rounded-right" id="login-right">
      <button
        class="btn bg-transparent border-secondary rounded-circle py-1 px-2 float-right text-light mt-3"
        (click)="dismissModal()"
      >
        <i class="fa fa-times smaller"></i>
      </button>
      <form class="px-3" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="clearfix mb-4">
          <h1 class="mb-4">
            <strong class="text-light float-left">
              Login
            </strong>
          </h1>
        </div>

        <div class="form-group">
          <input
            class="form-control"
            placeholder="email@example.com"
            type="email"
            formControlName="email"
          />
          <div *ngIf="submitted && f.email.errors?.required">
            <div class="text-danger px-3 pt-2">
              <i class="fa fa-exclamation-circle text-danger"></i>
              Email is required
            </div>
          </div>
          <div *ngIf="submitted && f.email.errors?.email">
            <div class="text-danger px-3 pt-2">
              <i class="fa fa-exclamation-circle text-danger"></i>
              Email must be a valid email address
            </div>
          </div>
        </div>
        <div class="form-group">
          <input
            type="password"
            class="form-control"
            placeholder="Password"
            formControlName="password"
          />
          <div *ngIf="submitted && f.password.errors?.required">
            <div class="text-danger px-3 pt-2">
              <i class="fa fa-exclamation-circle text-danger"></i>
              Password is required
            </div>
          </div>
        </div>
        <hr />
        <div class="form-group">
          <button
            type="submit"
            class="form-control btn btn-danger"
            [disabled]="loading"
          >
            {{ loading ? '' : 'Login' }}
            <i class="fa fa-spinner" *ngIf="loading"></i>
          </button>
        </div>
        <div class="form-group text-center mb-5">
          <p class="text-secondary">or</p>
          <a class="text-primary" (click)="openModal(registerModal)">
            Register
          </a>
        </div>
      </form>
    </div>
  </div>
</ng-template>

<ng-template #registerModal let-modal>
  <div class="row" id="register">
    <div class="col-lg-6 rounded-left" id="register-left">
      <form class="px-3" onSubmit="{registerAccount}">
        <div class="clearfix mb-4">
          <h2 class="mb-4">
            <strong class="text-secondary float-left">
              <span class="text-light">Register</span> -
              <span class="text-primary text-capitalize">{{ role }}</span>
            </strong>
          </h2>
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Student Id"
            *ngIf="role == 'student'"
          />
        </div>
        <div class="form-group row">
          <div class="col">
            <input type="text" class="form-control" placeholder="First name" />
          </div>
          <div class="col">
            <input type="text" class="form-control" placeholder="Last name" />
          </div>
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="email@example.com"
          />
        </div>
        <div class="form-group">
          <input type="password" class="form-control" placeholder="Password" />
        </div>
        <div class="form-group">
          <input
            type="password"
            class="form-control"
            placeholder="Confirm password"
          />
        </div>
        <hr />

        <div class="form-group" *ngIf="role == 'student'">
          <input
            type="text"
            class="form-control"
            placeholder="Classroom Code"
          />
        </div>

        <div class="form-group">
          <input
            type="submit"
            class="form-control btn btn-danger"
            value="Register"
          />
        </div>
        <hr class="mx-auto bg-secondary w-50" />
        <div class="form-group text-center mb-3">
          <button
            class="btn bg-transparent text-primary"
            (click)="changeRole()"
          >
            {{ role == 'instructor' ? 'Im a Student' : 'Im an Instructor' }}
          </button>
        </div>
      </form>
    </div>
    <div class="col-lg-6 rounded-right bg-transparent">
      <button
        class="btn bg-transparent border-secondary rounded-circle py-1 px-2 float-right text-light mt-3"
        (click)="dismissModal()"
      >
        <i class="fa fa-times smaller"></i>
      </button>
    </div>
  </div>
</ng-template>
